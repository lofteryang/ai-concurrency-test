# AIæ¥å£å‹æµ‹å·¥å…·

ä¸€ä¸ªä¸“ä¸ºOpenAIæ ¼å¼APIè®¾è®¡çš„æ¥å£å‹æµ‹å·¥å…·ï¼Œæ”¯æŒå¤šç§æµ‹è¯•åœºæ™¯å’Œè¯¦ç»†çš„æ€§èƒ½åˆ†æã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **å¤šç§æµ‹è¯•æ¨¡å¼**: æ”¯æŒå¹¶å‘æ•°æ§åˆ¶ã€æ—¶é—´é™åˆ¶ã€è¯·æ±‚æ•°é™åˆ¶
- **ä¸°å¯Œçš„æµ‹è¯•åœºæ™¯**: é¢„å®šä¹‰å¤šç§æµ‹è¯•åœºæ™¯ï¼ˆè½»é‡ã€ä¸­ç­‰ã€é«˜è´Ÿè½½ã€å‹åŠ›æµ‹è¯•ç­‰ï¼‰
- **å®æ—¶è¿›åº¦æ˜¾ç¤º**: å½©è‰²è¿›åº¦æ¡å’Œå®æ—¶ç»Ÿè®¡ä¿¡æ¯
- **è¯¦ç»†ç»“æœåˆ†æ**: å“åº”æ—¶é—´ç»Ÿè®¡ã€æˆåŠŸç‡åˆ†æã€é”™è¯¯åˆ†æ
- **ç»“æœä¿å­˜**: è‡ªåŠ¨ä¿å­˜æµ‹è¯•ç»“æœåˆ°JSONæ–‡ä»¶
- **æ€§èƒ½è¯„ä¼°**: è‡ªåŠ¨è¯„çº§ç³»ç»Ÿï¼ˆä¼˜ç§€/è‰¯å¥½/å¯æ¥å—/è¾ƒå·®ï¼‰
- **çµæ´»é…ç½®**: æ”¯æŒå‘½ä»¤è¡Œå‚æ•°å’Œé…ç½®æ–‡ä»¶

## ğŸ“¦ å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install

# æˆ–è€…ä½¿ç”¨yarn
yarn install
```

## âš™ï¸ é…ç½®

é¡¹ç›®å·²é¢„é…ç½®äº†ä½ çš„APIä¿¡æ¯ï¼š

- **åŸŸå**: `cn-beijing.yuannengai.com`
- **æ¨¡å‹**: `deepseek-v3-1-250821`
- **APIå¯†é’¥**: å·²é…ç½®ï¼ˆè¯·åœ¨`config.js`ä¸­æŸ¥çœ‹ï¼‰

å¦‚éœ€ä¿®æ”¹é…ç½®ï¼Œè¯·ç¼–è¾‘ `config.js` æ–‡ä»¶ã€‚

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. éªŒè¯é…ç½®
```bash
node index.js validate
```

### 2. è¿è¡Œç®€å•æµ‹è¯•
```bash
# ä½¿ç”¨npmè„šæœ¬
npm run test

# æˆ–ç›´æ¥è¿è¡Œ
node index.js simple
```

### 3. æŸ¥çœ‹å¯ç”¨æµ‹è¯•åœºæ™¯
```bash
node index.js scenario list
```

### 4. è¿è¡Œåœºæ™¯æµ‹è¯•
```bash
# è½»é‡çº§æµ‹è¯•
node index.js scenario light

# ä¸­ç­‰è´Ÿè½½æµ‹è¯•
node index.js scenario medium

# é«˜è´Ÿè½½æµ‹è¯•
node index.js scenario heavy

# å‹åŠ›æµ‹è¯•
node index.js scenario stress

# æ—¶é—´é™åˆ¶æµ‹è¯•ï¼ˆ60ç§’ï¼‰
node index.js scenario duration
```

## ğŸ“‹ å‘½ä»¤è¯¦è§£

### ç®€å•æµ‹è¯•
```bash
node index.js simple
```
- å¹¶å‘æ•°: 5
- è¯·æ±‚æ•°: 20
- é—´éš”: 1000ms

### åœºæ™¯æµ‹è¯•
```bash
node index.js scenario <åœºæ™¯å> [é€‰é¡¹]
```

**å¯ç”¨åœºæ™¯:**
- `light`: è½»é‡çº§æµ‹è¯•ï¼ˆ5å¹¶å‘ï¼Œ50è¯·æ±‚ï¼‰
- `medium`: ä¸­ç­‰è´Ÿè½½æµ‹è¯•ï¼ˆ20å¹¶å‘ï¼Œ200è¯·æ±‚ï¼‰
- `heavy`: é«˜è´Ÿè½½æµ‹è¯•ï¼ˆ50å¹¶å‘ï¼Œ500è¯·æ±‚ï¼‰
- `stress`: å‹åŠ›æµ‹è¯•ï¼ˆ100å¹¶å‘ï¼Œ1000è¯·æ±‚ï¼‰
- `duration`: æ—¶é—´é™åˆ¶æµ‹è¯•ï¼ˆ10å¹¶å‘ï¼Œ60ç§’ï¼‰

**é€‰é¡¹:**
- `-c, --concurrent <number>`: è¦†ç›–å¹¶å‘æ•°
- `-r, --requests <number>`: è¦†ç›–è¯·æ±‚æ•°
- `-d, --duration <number>`: è¦†ç›–æŒç»­æ—¶é—´

**ç¤ºä¾‹:**
```bash
# è¿è¡Œè½»é‡çº§æµ‹è¯•ï¼Œä½†ä½¿ç”¨10å¹¶å‘
node index.js scenario light -c 10

# è¿è¡Œä¸­ç­‰è´Ÿè½½æµ‹è¯•ï¼Œä½†åªå‘100ä¸ªè¯·æ±‚
node index.js scenario medium -r 100
```

### è‡ªå®šä¹‰æµ‹è¯•
```bash
node index.js custom [é€‰é¡¹]
```

**é€‰é¡¹:**
- `-c, --concurrent <number>`: å¹¶å‘æ•°ï¼ˆé»˜è®¤: 10ï¼‰
- `-r, --requests <number>`: æ€»è¯·æ±‚æ•°ï¼ˆé»˜è®¤: 100ï¼‰
- `-d, --duration <number>`: æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼ˆé»˜è®¤: 0ï¼Œè¡¨ç¤ºä½¿ç”¨è¯·æ±‚æ•°æ¨¡å¼ï¼‰
- `-t, --timeout <number>`: è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼ˆé»˜è®¤: 30000ï¼‰
- `-i, --interval <number>`: è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼ˆé»˜è®¤: 1000ï¼‰
- `--no-save`: ä¸ä¿å­˜ç»“æœ
- `-o, --output <dir>`: ç»“æœè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤: ./resultsï¼‰

**ç¤ºä¾‹:**
```bash
# è‡ªå®šä¹‰æµ‹è¯•ï¼š20å¹¶å‘ï¼Œ200è¯·æ±‚ï¼Œ500msé—´éš”
node index.js custom -c 20 -r 200 -i 500

# æ—¶é—´é™åˆ¶æµ‹è¯•ï¼š10å¹¶å‘ï¼ŒæŒç»­120ç§’
node index.js custom -c 10 -d 120

# å¿«é€Ÿæµ‹è¯•ï¼š50å¹¶å‘ï¼Œ1000è¯·æ±‚ï¼Œä¸ä¿å­˜ç»“æœ
node index.js custom -c 50 -r 1000 --no-save
```

### ç›´æ¥ä½¿ç”¨å‹æµ‹è„šæœ¬
```bash
node pressureTest.js [é€‰é¡¹]
```

**é€‰é¡¹:**
- `-c, --concurrent <number>`: å¹¶å‘æ•°ï¼ˆé»˜è®¤: 10ï¼‰
- `-r, --requests <number>`: æ€»è¯·æ±‚æ•°ï¼ˆé»˜è®¤: 100ï¼‰
- `-d, --duration <number>`: æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼ˆé»˜è®¤: 0ï¼‰
- `-t, --timeout <number>`: è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼ˆé»˜è®¤: 30000ï¼‰
- `-i, --interval <number>`: è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼ˆé»˜è®¤: 1000ï¼‰
- `--no-save`: ä¸ä¿å­˜ç»“æœ
- `-o, --output <dir>`: ç»“æœè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤: ./resultsï¼‰

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### å®æ—¶æ˜¾ç¤º
æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºï¼š
- å½©è‰²è¿›åº¦æ¡
- å®æ—¶æˆåŠŸç‡
- æˆåŠŸ/å¤±è´¥è¯·æ±‚è®¡æ•°
- å·²ç”¨æ—¶é—´

### è¯¦ç»†æŠ¥å‘Š
æµ‹è¯•å®Œæˆåä¼šæ˜¾ç¤ºï¼š
- **åŸºç¡€ç»Ÿè®¡**: æ€»è¯·æ±‚æ•°ã€æˆåŠŸæ•°ã€å¤±è´¥æ•°ã€æˆåŠŸç‡
- **å“åº”æ—¶é—´ç»Ÿè®¡**: å¹³å‡ã€æœ€å°ã€æœ€å¤§ã€P50ã€P90ã€P95ã€P99
- **æ€§èƒ½æŒ‡æ ‡**: QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰
- **é”™è¯¯åˆ†æ**: é”™è¯¯ç±»å‹åˆ†å¸ƒ
- **æ€§èƒ½è¯„ä¼°**: è‡ªåŠ¨è¯„çº§ï¼ˆä¼˜ç§€/è‰¯å¥½/å¯æ¥å—/è¾ƒå·®ï¼‰

### ç»“æœä¿å­˜
æµ‹è¯•ç»“æœä¼šè‡ªåŠ¨ä¿å­˜åˆ° `./results/` ç›®å½•ä¸‹ï¼š

**å®Œæ•´ç»“æœæ–‡ä»¶**ï¼š
```
pressure-test-YYYY-MM-DDTHH-mm-ss-sssZ.json
```

**å¤±è´¥æ—¥å¿—æ–‡ä»¶**ï¼š
```
failed-requests-YYYY-MM-DDTHH-mm-ss-sssZ.json
failed-analysis-YYYY-MM-DDTHH-mm-ss-sssZ.json
```

å¤±è´¥æ—¥å¿—æ–‡ä»¶åŒ…å«ï¼š
- å¤±è´¥è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
- é”™è¯¯ç±»å‹åˆ†æ
- HTTPçŠ¶æ€ç ç»Ÿè®¡
- ä¼˜åŒ–å»ºè®®
- å¸¸è§é”™è¯¯æ¨¡å¼è¯†åˆ«

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®æ–‡ä»¶: `config.js`

```javascript
module.exports = {
  // APIé…ç½®
  api: {
    baseURL: 'https://cn-beijing.yuannengai.com',
    apiKey: 'your-api-key',
    model: 'deepseek-v3-1-250821',
    endpoint: '/v1/chat/completions'
  },

  // æµ‹è¯•åœºæ™¯
  scenarios: {
    light: { concurrent: 5, requests: 50, interval: 2000 },
    medium: { concurrent: 20, requests: 200, interval: 500 },
    heavy: { concurrent: 50, requests: 500, interval: 100 },
    stress: { concurrent: 100, requests: 1000, interval: 50 }
  },

  // æ€§èƒ½è¯„ä¼°é˜ˆå€¼
  analysis: {
    responseTimeThresholds: {
      excellent: 1000,  // ä¼˜ç§€
      good: 3000,       // è‰¯å¥½
      acceptable: 5000, // å¯æ¥å—
      poor: 10000       // è¾ƒå·®
    }
  }
};
```

## ğŸ“ˆ æ€§èƒ½è¯„ä¼°æ ‡å‡†

### å“åº”æ—¶é—´è¯„çº§
- **ä¼˜ç§€**: â‰¤ 1000ms
- **è‰¯å¥½**: â‰¤ 3000ms
- **å¯æ¥å—**: â‰¤ 5000ms
- **è¾ƒå·®**: > 5000ms

### æˆåŠŸç‡è¯„çº§
- **ä¼˜ç§€**: â‰¥ 99%
- **è‰¯å¥½**: â‰¥ 95%
- **å¯æ¥å—**: â‰¥ 90%
- **è¾ƒå·®**: < 90%

### QPSè¯„çº§
- **ä¼˜ç§€**: â‰¥ 50 QPS
- **è‰¯å¥½**: â‰¥ 20 QPS
- **å¯æ¥å—**: â‰¥ 10 QPS
- **è¾ƒå·®**: < 10 QPS

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **APIé™åˆ¶**: è¯·æ³¨æ„APIçš„é€Ÿç‡é™åˆ¶ï¼Œé¿å…è¶…å‡ºé™åˆ¶å¯¼è‡´æµ‹è¯•å¤±è´¥
2. **ç½‘ç»œç¯å¢ƒ**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé¿å…ç½‘ç»œé—®é¢˜å½±å“æµ‹è¯•ç»“æœ
3. **èµ„æºæ¶ˆè€—**: é«˜å¹¶å‘æµ‹è¯•ä¼šæ¶ˆè€—è¾ƒå¤šç³»ç»Ÿèµ„æºï¼Œè¯·æ ¹æ®æœºå™¨æ€§èƒ½è°ƒæ•´å‚æ•°
4. **ç»“æœè§£è¯»**: æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒï¼Œå®é™…æ€§èƒ½å¯èƒ½å› ç½‘ç»œã€æœåŠ¡å™¨è´Ÿè½½ç­‰å› ç´ è€Œå˜åŒ–

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥è¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - å¢åŠ è¶…æ—¶æ—¶é—´å‚æ•° `-t`
   - å‡å°‘å¹¶å‘æ•° `-c`

2. **APIå¯†é’¥é”™è¯¯**
   - è¿è¡Œ `node index.js validate` éªŒè¯é…ç½®
   - æ£€æŸ¥ `config.js` ä¸­çš„APIå¯†é’¥

3. **å†…å­˜ä¸è¶³**
   - å‡å°‘å¹¶å‘æ•°
   - å‡å°‘æ€»è¯·æ±‚æ•°
   - å¢åŠ è¯·æ±‚é—´éš”

4. **æµ‹è¯•ç»“æœå¼‚å¸¸**
   - æ£€æŸ¥APIæœåŠ¡çŠ¶æ€
   - ç¡®è®¤æ¨¡å‹åç§°æ­£ç¡®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå¤šç§æµ‹è¯•æ¨¡å¼
- å®Œæ•´çš„æ€§èƒ½åˆ†æåŠŸèƒ½
- é¢„é…ç½®çš„æµ‹è¯•åœºæ™¯

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ï¼

## ğŸ“‹ å¤±è´¥æ—¥å¿—åˆ†æ

é¡¹ç›®æä¾›äº†ä¸“é—¨çš„å¤±è´¥æ—¥å¿—åˆ†æå·¥å…·ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå®šä½å’Œè§£å†³å‹æµ‹ä¸­çš„é—®é¢˜ã€‚

### åˆ†ææœ€æ–°å¤±è´¥æ—¥å¿—
```bash
# ä½¿ç”¨npmè„šæœ¬
npm run analyze-latest

# æˆ–ç›´æ¥è¿è¡Œ
node analyzeFailures.js latest
```

### åˆ—å‡ºæ‰€æœ‰å¤±è´¥æ—¥å¿—
```bash
npm run analyze-list
node analyzeFailures.js list
```

### åˆ†ææŒ‡å®šå¤±è´¥æ—¥å¿—æ–‡ä»¶
```bash
node analyzeFailures.js file failed-requests-2025-01-01T10-00-00-000Z.json
```

### æ˜¾ç¤ºå¤±è´¥æŠ¥å‘Šæ‘˜è¦
```bash
npm run analyze-summary
node analyzeFailures.js summary
```

### å¤±è´¥åˆ†ææŠ¥å‘Šå†…å®¹
- **å¤±è´¥ç»Ÿè®¡**: å¤±è´¥æ•°é‡ã€å¤±è´¥ç‡ã€æ€»è¯·æ±‚æ•°
- **é”™è¯¯åˆ†æ**: é”™è¯¯ç±»å‹åˆ†å¸ƒã€HTTPçŠ¶æ€ç ç»Ÿè®¡
- **ä¼˜åŒ–å»ºè®®**: åŸºäºé”™è¯¯ç±»å‹çš„æ™ºèƒ½å»ºè®®
- **è¯¦ç»†æ—¥å¿—**: å¤±è´¥è¯·æ±‚çš„å®Œæ•´ä¿¡æ¯

### å¸¸è§é”™è¯¯ç±»å‹å’Œå»ºè®®
- **è¶…æ—¶é”™è¯¯**: å»ºè®®å¢åŠ è¶…æ—¶æ—¶é—´æˆ–å‡å°‘å¹¶å‘æ•°
- **é€Ÿç‡é™åˆ¶**: å»ºè®®é™ä½å¹¶å‘æ•°æˆ–å¢åŠ è¯·æ±‚é—´éš”
- **æœåŠ¡å™¨é”™è¯¯**: å»ºè®®å‡å°‘å¹¶å‘æ•°ï¼ŒæœåŠ¡å™¨å¯èƒ½è¿‡è½½
- **è®¤è¯é”™è¯¯**: æ£€æŸ¥APIå¯†é’¥å’Œæƒé™é…ç½®

## ğŸ“„ è®¸å¯è¯

ISC License
