#!/usr/bin/env node

const axios = require('axios')
const chalk = require('chalk')
const cliProgress = require('cli-progress')
const { program } = require('commander')
const fs = require('fs')
const path = require('path')
const config = require('./config')

// ä¿¡å·é‡ç±»ï¼Œç”¨äºæ§åˆ¶å¹¶å‘æ•°é‡
class Semaphore {
  constructor(max) {
    this.max = max
    this.current = 0
    this.queue = []
  }

  async acquire() {
    return new Promise((resolve) => {
      if (this.current < this.max) {
        this.current++
        resolve()
      } else {
        this.queue.push(resolve)
      }
    })
  }

  release() {
    this.current--
    if (this.queue.length > 0) {
      const resolve = this.queue.shift()
      this.current++
      resolve()
    }
  }
}

// ä»é…ç½®æ–‡ä»¶è¯»å–APIé…ç½®
const CONFIG = config.api

// ä»é…ç½®æ–‡ä»¶è¯»å–é»˜è®¤æµ‹è¯•é…ç½®
const DEFAULT_CONFIG = config.default

// æµ‹è¯•æ¶ˆæ¯æ¨¡æ¿ - 2000-3000 tokenå·¦å³çš„å†…å®¹
const TEST_MESSAGES = [
  {
    role: 'user',
    content: `è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚`,
  },
  {
    role: 'user',
    content: `è¯·è¯¦ç»†è§£é‡Šäººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹ã€æ ¸å¿ƒæŠ€æœ¯åŸç†ä»¥åŠæœªæ¥å‘å±•è¶‹åŠ¿ã€‚

äººå·¥æ™ºèƒ½ï¼ˆArtificial Intelligenceï¼ŒAIï¼‰ä½œä¸ºè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œè‡ª20ä¸–çºª50å¹´ä»£è¯ç”Ÿä»¥æ¥ï¼Œç»å†äº†å¤šæ¬¡å‘å±•æµªæ½®ã€‚ä»æœ€åˆçš„ç¬¦å·ä¸»ä¹‰æ–¹æ³•åˆ°ç°åœ¨çš„æ·±åº¦å­¦ä¹ å’Œç¥ç»ç½‘ç»œï¼ŒAIæŠ€æœ¯åœ¨å„ä¸ªé¢†åŸŸéƒ½å–å¾—äº†çªç ´æ€§è¿›å±•ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹AIçš„å‘å±•å†ç¨‹ã€‚1950å¹´ï¼Œè‹±å›½æ•°å­¦å®¶è‰¾ä¼¦Â·å›¾çµæå‡ºäº†è‘—åçš„"å›¾çµæµ‹è¯•"ï¼Œä¸ºåˆ¤æ–­æœºå™¨æ˜¯å¦å…·å¤‡æ™ºèƒ½æä¾›äº†æ ‡å‡†ã€‚1956å¹´ï¼Œåœ¨ç¾å›½è¾¾ç‰¹èŒ…æ–¯å­¦é™¢å¬å¼€çš„ä¼šè®®ä¸Šï¼Œ"äººå·¥æ™ºèƒ½"è¿™ä¸€æœ¯è¯­è¢«æ­£å¼æå‡ºï¼Œæ ‡å¿—ç€AIå­¦ç§‘çš„è¯ç”Ÿã€‚

åœ¨æ—©æœŸå‘å±•é˜¶æ®µï¼Œç ”ç©¶è€…ä»¬ä¸»è¦å…³æ³¨ç¬¦å·æ¨ç†å’Œä¸“å®¶ç³»ç»Ÿã€‚è¿™äº›ç³»ç»Ÿé€šè¿‡é¢„å®šä¹‰çš„è§„åˆ™å’ŒçŸ¥è¯†åº“æ¥æ¨¡æ‹Ÿäººç±»çš„æ¨ç†è¿‡ç¨‹ã€‚è™½ç„¶åœ¨æŸäº›ç‰¹å®šé¢†åŸŸå–å¾—äº†æˆåŠŸï¼Œä½†ç”±äºç¼ºä¹å­¦ä¹ èƒ½åŠ›å’Œæ³›åŒ–èƒ½åŠ›ï¼Œè¿™äº›ç³»ç»Ÿçš„åº”ç”¨èŒƒå›´ç›¸å¯¹æœ‰é™ã€‚

éšç€è®¡ç®—èƒ½åŠ›çš„æå‡å’Œå¤§æ•°æ®æ—¶ä»£çš„åˆ°æ¥ï¼Œæœºå™¨å­¦ä¹ æŠ€æœ¯å¼€å§‹å…´èµ·ã€‚ç‰¹åˆ«æ˜¯æ·±åº¦å­¦ä¹ çš„çªç ´ï¼Œä½¿å¾—AIåœ¨å›¾åƒè¯†åˆ«ã€è¯­éŸ³å¤„ç†ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸå–å¾—äº†å‰æ‰€æœªæœ‰çš„æˆå°±ã€‚å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„æˆåŠŸåº”ç”¨ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰å’Œé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰åœ¨åºåˆ—æ•°æ®å¤„ç†ä¸­çš„ä¼˜å¼‚è¡¨ç°ï¼Œä»¥åŠTransformeræ¶æ„åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„é©å‘½æ€§è¿›å±•ï¼Œéƒ½æ¨åŠ¨äº†AIæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ã€‚

ç›®å‰ï¼ŒAIæŠ€æœ¯å·²ç»åœ¨åŒ»ç–—ã€é‡‘èã€æ•™è‚²ã€äº¤é€šã€åˆ¶é€ ä¸šç­‰å¤šä¸ªè¡Œä¸šå¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚ä»è‡ªåŠ¨é©¾é©¶æ±½è½¦åˆ°æ™ºèƒ½åŒ»ç–—è¯Šæ–­ï¼Œä»é‡‘èé£é™©è¯„ä¼°åˆ°ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿï¼ŒAIæ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼å’Œå·¥ä½œæ–¹å¼ã€‚

å±•æœ›æœªæ¥ï¼ŒAIæŠ€æœ¯å°†ç»§ç»­å‘æ›´æ™ºèƒ½ã€æ›´é€šç”¨ã€æ›´å®‰å…¨çš„æ–¹å‘å‘å±•ã€‚é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆAGIï¼‰çš„è¿½æ±‚ã€äººæœºåä½œæ¨¡å¼çš„æ¢ç´¢ã€AIä¼¦ç†å’Œå®‰å…¨é—®é¢˜çš„è§£å†³ï¼Œéƒ½å°†æˆä¸ºæœªæ¥AIå‘å±•çš„é‡è¦æ–¹å‘ã€‚

è¯·åŸºäºä»¥ä¸ŠèƒŒæ™¯ï¼Œè¯¦ç»†åˆ†æAIæŠ€æœ¯å¯¹ç°ä»£ç¤¾ä¼šçš„å½±å“ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•æ›´å¥½åœ°åˆ©ç”¨AIæŠ€æœ¯æ¥æ¨åŠ¨ç¤¾ä¼šè¿›æ­¥å’Œäººç±»ç¦ç¥‰ã€‚`,
  },
  {
    role: 'user',
    content: `è¯·è¯¦ç»†åˆ†æåŒºå—é“¾æŠ€æœ¯çš„åŸç†ã€åº”ç”¨åœºæ™¯ä»¥åŠé¢ä¸´çš„æŒ‘æˆ˜ã€‚

åŒºå—é“¾æŠ€æœ¯ä½œä¸ºè¿‘å¹´æ¥æœ€å…·é¢ è¦†æ€§çš„æŠ€æœ¯åˆ›æ–°ä¹‹ä¸€ï¼Œè‡ª2008å¹´ä¸­æœ¬èªæå‡ºæ¯”ç‰¹å¸æ¦‚å¿µä»¥æ¥ï¼Œå·²ç»å‘å±•æˆä¸ºæ¶µç›–æ•°å­—è´§å¸ã€æ™ºèƒ½åˆçº¦ã€å»ä¸­å¿ƒåŒ–åº”ç”¨ç­‰å¤šä¸ªé¢†åŸŸçš„ç»¼åˆæ€§æŠ€æœ¯ä½“ç³»ã€‚

ä»æŠ€æœ¯åŸç†è§’åº¦æ¥çœ‹ï¼ŒåŒºå—é“¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ã€‚å®ƒé€šè¿‡å¯†ç å­¦ç®—æ³•ã€å…±è¯†æœºåˆ¶ã€æ—¶é—´æˆ³ç­‰æŠ€æœ¯æ‰‹æ®µï¼Œæ„å»ºäº†ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€ä¸å¯ç¯¡æ”¹ã€é€æ˜å¯è¿½æº¯çš„æ•°æ®å­˜å‚¨å’Œä¼ è¾“ç³»ç»Ÿã€‚æ¯ä¸ªåŒºå—éƒ½åŒ…å«äº†å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œå½¢æˆäº†é“¾å¼ç»“æ„ï¼Œä»»ä½•å¯¹å†å²æ•°æ®çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´åç»­æ‰€æœ‰åŒºå—çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œè¢«ç³»ç»Ÿæ£€æµ‹å‡ºæ¥ã€‚

å…±è¯†æœºåˆ¶æ˜¯åŒºå—é“¾æŠ€æœ¯çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œå¸¸è§çš„å…±è¯†ç®—æ³•åŒ…æ‹¬å·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼‰ã€æƒç›Šè¯æ˜ï¼ˆPoSï¼‰ã€å§”æ‰˜æƒç›Šè¯æ˜ï¼ˆDPoSï¼‰ç­‰ã€‚è¿™äº›æœºåˆ¶ç¡®ä¿äº†ç½‘ç»œä¸­çš„èŠ‚ç‚¹èƒ½å¤Ÿå°±åŒºå—é“¾çš„çŠ¶æ€è¾¾æˆä¸€è‡´ï¼Œé˜²æ­¢åŒé‡æ”¯ä»˜ç­‰æ¶æ„è¡Œä¸ºã€‚

æ™ºèƒ½åˆçº¦çš„å¼•å…¥è¿›ä¸€æ­¥æ‰©å±•äº†åŒºå—é“¾çš„åº”ç”¨èŒƒå›´ã€‚æ™ºèƒ½åˆçº¦æ˜¯ä¸€ç§è‡ªåŠ¨æ‰§è¡Œçš„è®¡ç®—æœºç¨‹åºï¼Œå®ƒèƒ½å¤Ÿåœ¨æ»¡è¶³é¢„å®šæ¡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œæ— éœ€ç¬¬ä¸‰æ–¹å¹²é¢„ã€‚è¿™ä¸ºå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰çš„å¼€å‘æä¾›äº†åŸºç¡€ã€‚

åœ¨åº”ç”¨åœºæ™¯æ–¹é¢ï¼ŒåŒºå—é“¾æŠ€æœ¯å·²ç»åœ¨å¤šä¸ªé¢†åŸŸå±•ç°å‡ºå·¨å¤§æ½œåŠ›ã€‚åœ¨é‡‘èé¢†åŸŸï¼Œé™¤äº†æ•°å­—è´§å¸ä¹‹å¤–ï¼ŒåŒºå—é“¾è¿˜è¢«åº”ç”¨äºè·¨å¢ƒæ”¯ä»˜ã€ä¾›åº”é“¾é‡‘èã€ä¿é™©ç†èµ”ç­‰åœºæ™¯ã€‚åœ¨ä¾›åº”é“¾ç®¡ç†ä¸­ï¼ŒåŒºå—é“¾èƒ½å¤Ÿæä¾›å®Œæ•´çš„å•†å“è¿½æº¯ä¿¡æ¯ï¼Œç¡®ä¿äº§å“è´¨é‡å’Œå®‰å…¨ã€‚åœ¨æ•°å­—èº«ä»½è®¤è¯æ–¹é¢ï¼ŒåŒºå—é“¾å¯ä»¥ä¸ºç”¨æˆ·æä¾›å»ä¸­å¿ƒåŒ–çš„èº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

ç„¶è€Œï¼ŒåŒºå—é“¾æŠ€æœ¯ä¹Ÿé¢ä¸´ç€è¯¸å¤šæŒ‘æˆ˜ã€‚é¦–å…ˆæ˜¯å¯æ‰©å±•æ€§é—®é¢˜ï¼Œç°æœ‰çš„åŒºå—é“¾ç½‘ç»œåœ¨å¤„ç†å¤§é‡äº¤æ˜“æ—¶å¾€å¾€é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚å…¶æ¬¡æ˜¯èƒ½æºæ¶ˆè€—é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯é‡‡ç”¨PoWå…±è¯†æœºåˆ¶çš„åŒºå—é“¾ç½‘ç»œï¼Œå…¶èƒ½æºæ¶ˆè€—é‡å·¨å¤§ã€‚æ­¤å¤–ï¼Œç›‘ç®¡æ”¿ç­–çš„ä¸ç¡®å®šæ€§ã€æŠ€æœ¯æ ‡å‡†çš„ç¼ºå¤±ã€ç”¨æˆ·æ•™è‚²çš„ä¸è¶³ç­‰é—®é¢˜ä¹Ÿåˆ¶çº¦ç€åŒºå—é“¾æŠ€æœ¯çš„å¹¿æ³›åº”ç”¨ã€‚

è¯·åŸºäºä»¥ä¸Šåˆ†æï¼Œæ¢è®¨åŒºå—é“¾æŠ€æœ¯åœ¨æœªæ¥åå¹´çš„å‘å±•è¶‹åŠ¿ï¼Œä»¥åŠå¦‚ä½•è§£å†³å½“å‰é¢ä¸´çš„æŠ€æœ¯å’Œåˆ¶åº¦æŒ‘æˆ˜ã€‚`,
  },
  {
    role: 'user',
    content: `è¯·è¯¦ç»†é˜è¿°é‡å­è®¡ç®—çš„åŸºæœ¬åŸç†ã€å‘å±•ç°çŠ¶ä»¥åŠæœªæ¥åº”ç”¨å‰æ™¯ã€‚

é‡å­è®¡ç®—ä½œä¸ºä¸‹ä¸€ä»£è®¡ç®—æŠ€æœ¯çš„ä»£è¡¨ï¼ŒåŸºäºé‡å­åŠ›å­¦çš„åŸºæœ¬åŸç†ï¼Œæœ‰æœ›åœ¨ç‰¹å®šé—®é¢˜ä¸Šå®ç°æŒ‡æ•°çº§çš„è®¡ç®—åŠ é€Ÿï¼Œä»è€Œåœ¨å¯†ç å­¦ã€ææ–™ç§‘å­¦ã€è¯ç‰©å‘ç°ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸäº§ç”Ÿé©å‘½æ€§å½±å“ã€‚

é‡å­è®¡ç®—çš„æ ¸å¿ƒæ˜¯é‡å­æ¯”ç‰¹ï¼ˆqubitï¼‰ï¼Œä¸ç»å…¸æ¯”ç‰¹åªèƒ½å¤„äº0æˆ–1ä¸¤ç§çŠ¶æ€ä¸åŒï¼Œé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶å¤„äº0å’Œ1çš„å åŠ æ€ã€‚è¿™ç§å åŠ æ€§è´¨ä½¿å¾—nä¸ªé‡å­æ¯”ç‰¹å¯ä»¥åŒæ—¶è¡¨ç¤º2^nç§çŠ¶æ€ï¼Œä¸ºå¹¶è¡Œè®¡ç®—æä¾›äº†åŸºç¡€ã€‚æ­¤å¤–ï¼Œé‡å­æ¯”ç‰¹ä¹‹é—´è¿˜å¯ä»¥äº§ç”Ÿçº ç¼ ç°è±¡ï¼Œå³ä¸¤ä¸ªæˆ–å¤šä¸ªé‡å­æ¯”ç‰¹ä¹‹é—´å­˜åœ¨å¼ºçƒˆçš„é‡å­å…³è”ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªé‡å­æ¯”ç‰¹çš„çŠ¶æ€ä¼šç¬é—´å½±å“å…¶ä»–çº ç¼ çš„é‡å­æ¯”ç‰¹ã€‚

é‡å­è®¡ç®—çš„å…³é”®æ“ä½œåŒ…æ‹¬é‡å­é—¨æ“ä½œå’Œé‡å­æµ‹é‡ã€‚é‡å­é—¨æ˜¯ä½œç”¨åœ¨é‡å­æ¯”ç‰¹ä¸Šçš„åŸºæœ¬æ“ä½œï¼Œç±»ä¼¼äºç»å…¸è®¡ç®—ä¸­çš„é€»è¾‘é—¨ã€‚é€šè¿‡ç»„åˆä¸åŒçš„é‡å­é—¨ï¼Œå¯ä»¥æ„å»ºå¤æ‚çš„é‡å­ç®—æ³•ã€‚é‡å­æµ‹é‡åˆ™ç”¨äºè¯»å–é‡å­æ¯”ç‰¹çš„çŠ¶æ€ï¼Œä½†æµ‹é‡è¿‡ç¨‹ä¼šç ´åé‡å­å åŠ æ€ï¼Œè¿™æ˜¯é‡å­è®¡ç®—çš„ä¸€ä¸ªé‡è¦é™åˆ¶ã€‚

ç›®å‰ï¼Œé‡å­è®¡ç®—çš„å‘å±•ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸»è¦é¢ä¸´é‡å­é€€ç›¸å¹²ã€é‡å­çº é”™ã€å¯æ‰©å±•æ€§ç­‰æŒ‘æˆ˜ã€‚é‡å­é€€ç›¸å¹²æ˜¯æŒ‡é‡å­ç³»ç»Ÿä¸ç¯å¢ƒç›¸äº’ä½œç”¨å¯¼è‡´é‡å­å åŠ æ€æ¶ˆå¤±çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯å®ç°é‡å­è®¡ç®—çš„ä¸»è¦éšœç¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼€å‘äº†å„ç§é‡å­çº é”™æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‡å­çº é”™ç å’Œå®¹é”™é‡å­è®¡ç®—ç­‰ã€‚

åœ¨ç¡¬ä»¶å®ç°æ–¹é¢ï¼Œç›®å‰æœ‰å¤šç§é‡å­æ¯”ç‰¹å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¶…å¯¼é‡å­æ¯”ç‰¹ã€ç¦»å­é˜±é‡å­æ¯”ç‰¹ã€æ‹“æ‰‘é‡å­æ¯”ç‰¹ç­‰ã€‚è°·æ­Œã€IBMã€å¾®è½¯ã€é˜¿é‡Œå·´å·´ç­‰ç§‘æŠ€å…¬å¸éƒ½åœ¨ç§¯ææŠ•å…¥é‡å­è®¡ç®—ç ”å‘ï¼Œå¹¶æ¨å‡ºäº†å„è‡ªçš„é‡å­è®¡ç®—å¹³å°ã€‚

é‡å­è®¡ç®—çš„åº”ç”¨å‰æ™¯éå¸¸å¹¿é˜”ã€‚åœ¨å¯†ç å­¦é¢†åŸŸï¼Œé‡å­è®¡ç®—å¯èƒ½ä¼šå¨èƒç°æœ‰çš„å…¬é’¥å¯†ç ç³»ç»Ÿï¼Œä½†ä¹Ÿä¸ºé‡å­å¯†ç å­¦çš„å‘å±•æä¾›äº†æœºé‡ã€‚åœ¨ææ–™ç§‘å­¦ä¸­ï¼Œé‡å­è®¡ç®—å¯ä»¥å¸®åŠ©æ¨¡æ‹Ÿå¤æ‚çš„é‡å­ç³»ç»Ÿï¼ŒåŠ é€Ÿæ–°ææ–™çš„å‘ç°å’Œè®¾è®¡ã€‚åœ¨è¯ç‰©å‘ç°æ–¹é¢ï¼Œé‡å­è®¡ç®—å¯ä»¥æ¨¡æ‹Ÿåˆ†å­é—´çš„ç›¸äº’ä½œç”¨ï¼Œæé«˜è¯ç‰©ç ”å‘çš„æ•ˆç‡ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé‡å­æœºå™¨å­¦ä¹ ç®—æ³•æœ‰æœ›åœ¨æ¨¡å¼è¯†åˆ«ã€ä¼˜åŒ–é—®é¢˜ç­‰æ–¹é¢å–å¾—çªç ´ã€‚

è¯·åˆ†æé‡å­è®¡ç®—æŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨é‡å­è®¡ç®—ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ã€‚`,
  },
  {
    role: 'user',
    content: `è¯·è¯¦ç»†åˆ†æäº‘è®¡ç®—æŠ€æœ¯çš„å‘å±•å†ç¨‹ã€æ ¸å¿ƒæŠ€æœ¯æ¶æ„ä»¥åŠæœªæ¥å‘å±•è¶‹åŠ¿ã€‚

äº‘è®¡ç®—ä½œä¸º21ä¸–çºªæœ€é‡è¦çš„ä¿¡æ¯æŠ€æœ¯ä¹‹ä¸€ï¼Œé€šè¿‡å°†è®¡ç®—èµ„æºã€å­˜å‚¨èµ„æºã€ç½‘ç»œèµ„æºç­‰è™šæ‹ŸåŒ–å¹¶é›†ä¸­ç®¡ç†ï¼Œä¸ºç”¨æˆ·æä¾›äº†æŒ‰éœ€è·å–ã€å¼¹æ€§æ‰©å±•ã€æŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„ITæœåŠ¡æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸ä»…é™ä½äº†ä¼ä¸šçš„ITæˆæœ¬ï¼Œè¿˜æé«˜äº†èµ„æºçš„åˆ©ç”¨æ•ˆç‡ï¼Œæ¨åŠ¨äº†æ•°å­—åŒ–è½¬å‹çš„è¿›ç¨‹ã€‚

äº‘è®¡ç®—çš„å‘å±•å¯ä»¥è¿½æº¯åˆ°20ä¸–çºª60å¹´ä»£çš„åˆ†æ—¶ç³»ç»Ÿï¼Œä½†çœŸæ­£æ„ä¹‰ä¸Šçš„äº‘è®¡ç®—æ¦‚å¿µæ˜¯åœ¨21ä¸–çºªåˆæå‡ºçš„ã€‚2006å¹´ï¼Œäºšé©¬é€Šæ¨å‡ºäº†å¼¹æ€§è®¡ç®—äº‘ï¼ˆEC2ï¼‰æœåŠ¡ï¼Œæ ‡å¿—ç€äº‘è®¡ç®—å•†ä¸šåŒ–çš„å¼€å§‹ã€‚éšåï¼Œè°·æ­Œã€å¾®è½¯ã€IBMç­‰ç§‘æŠ€å·¨å¤´çº·çº·è¿›å…¥äº‘è®¡ç®—å¸‚åœºï¼Œæ¨åŠ¨äº†äº‘è®¡ç®—æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ã€‚

ä»æŠ€æœ¯æ¶æ„è§’åº¦æ¥çœ‹ï¼Œäº‘è®¡ç®—é€šå¸¸é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒåŒ…æ‹¬åŸºç¡€è®¾æ–½å³æœåŠ¡ï¼ˆIaaSï¼‰ã€å¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰å’Œè½¯ä»¶å³æœåŠ¡ï¼ˆSaaSï¼‰ä¸‰ä¸ªå±‚æ¬¡ã€‚IaaSå±‚æä¾›è™šæ‹ŸåŒ–çš„è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™äº›åŸºç¡€è®¾æ–½ä¸Šéƒ¨ç½²å’Œè¿è¡Œè‡ªå·±çš„åº”ç”¨ç¨‹åºã€‚PaaSå±‚æä¾›å¼€å‘å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºçš„å¹³å°ç¯å¢ƒï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€å¼€å‘å·¥å…·ã€æ•°æ®åº“ç­‰ã€‚SaaSå±‚åˆ™ç›´æ¥æä¾›åº”ç”¨ç¨‹åºæœåŠ¡ï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒåº•å±‚çš„æŠ€æœ¯å®ç°ã€‚

è™šæ‹ŸåŒ–æŠ€æœ¯æ˜¯äº‘è®¡ç®—çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿç¡¬ä»¶åŠŸèƒ½ï¼Œå°†ç‰©ç†èµ„æºæŠ½è±¡ä¸ºé€»è¾‘èµ„æºï¼Œå®ç°äº†èµ„æºçš„çµæ´»åˆ†é…å’Œç®¡ç†ã€‚å®¹å™¨æŠ€æœ¯çš„å…´èµ·è¿›ä¸€æ­¥ç®€åŒ–äº†åº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ï¼ŒDockerã€Kubernetesç­‰å®¹å™¨ç¼–æ’å·¥å…·æˆä¸ºäº†äº‘åŸç”Ÿåº”ç”¨å¼€å‘çš„é‡è¦å·¥å…·ã€‚

äº‘è®¡ç®—è¿˜æ¶‰åŠå¤šé¡¹å…³é”®æŠ€æœ¯ï¼ŒåŒ…æ‹¬åˆ†å¸ƒå¼è®¡ç®—ã€è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨åŒ–è¿ç»´ã€å®‰å…¨é˜²æŠ¤ç­‰ã€‚åˆ†å¸ƒå¼è®¡ç®—ç¡®ä¿äº†äº‘æœåŠ¡çš„å¯é æ€§å’Œå¯æ‰©å±•æ€§ï¼Œè´Ÿè½½å‡è¡¡æŠ€æœ¯æé«˜äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œè‡ªåŠ¨åŒ–è¿ç»´é™ä½äº†è¿ç»´æˆæœ¬ï¼Œå®‰å…¨é˜²æŠ¤æŠ€æœ¯ä¿éšœäº†ç”¨æˆ·æ•°æ®çš„å®‰å…¨ã€‚

åœ¨éƒ¨ç½²æ¨¡å¼æ–¹é¢ï¼Œäº‘è®¡ç®—åŒ…æ‹¬å…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€æ··åˆäº‘å’Œè¾¹ç¼˜äº‘ç­‰ã€‚å…¬æœ‰äº‘ç”±ç¬¬ä¸‰æ–¹äº‘æœåŠ¡æä¾›å•†è¿è¥ï¼Œç”¨æˆ·é€šè¿‡äº’è”ç½‘è®¿é—®æœåŠ¡ï¼›ç§æœ‰äº‘ä¸ºä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼Œæä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œæ§åˆ¶èƒ½åŠ›ï¼›æ··åˆäº‘ç»“åˆäº†å…¬æœ‰äº‘å’Œç§æœ‰äº‘çš„ä¼˜åŠ¿ï¼›è¾¹ç¼˜äº‘åˆ™å°†è®¡ç®—èƒ½åŠ›æ¨å‘ç½‘ç»œè¾¹ç¼˜ï¼Œé™ä½äº†å»¶è¿Ÿï¼Œæé«˜äº†å“åº”é€Ÿåº¦ã€‚

äº‘è®¡ç®—çš„åº”ç”¨å·²ç»æ¸—é€åˆ°å„ä¸ªè¡Œä¸šï¼ŒåŒ…æ‹¬äº’è”ç½‘ã€é‡‘èã€åˆ¶é€ ã€æ•™è‚²ã€åŒ»ç–—ç­‰ã€‚ä¼ä¸šé€šè¿‡äº‘æœåŠ¡å®ç°äº†ä¸šåŠ¡çš„å¿«é€Ÿéƒ¨ç½²å’Œæ‰©å±•ï¼Œé™ä½äº†ITæˆæœ¬ï¼Œæé«˜äº†è¿è¥æ•ˆç‡ã€‚ç‰¹åˆ«æ˜¯åœ¨ç–«æƒ…æœŸé—´ï¼Œäº‘è®¡ç®—ä¸ºè¿œç¨‹åŠå…¬ã€åœ¨çº¿æ•™è‚²ã€ç”µå­å•†åŠ¡ç­‰æä¾›äº†é‡è¦æ”¯æ’‘ã€‚

å±•æœ›æœªæ¥ï¼Œäº‘è®¡ç®—æŠ€æœ¯å°†ç»§ç»­å‘æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–ã€å®‰å…¨åŒ–æ–¹å‘å‘å±•ã€‚äººå·¥æ™ºèƒ½ä¸äº‘è®¡ç®—çš„æ·±åº¦èåˆå°†äº§ç”Ÿæ™ºèƒ½äº‘æœåŠ¡ï¼Œè‡ªåŠ¨åŒ–è¿ç»´å°†è¿›ä¸€æ­¥æé«˜äº‘æœåŠ¡çš„æ•ˆç‡ï¼Œé‡å­è®¡ç®—ã€5Gç­‰æ–°æŠ€æœ¯çš„åº”ç”¨å°†ä¸ºäº‘è®¡ç®—å¸¦æ¥æ–°çš„å‘å±•æœºé‡ã€‚

è¯·åˆ†æäº‘è®¡ç®—æŠ€æœ¯é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨äº‘è®¡ç®—å‘æ›´æ™ºèƒ½ã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„æ–¹å‘å‘å±•ã€‚`,
  },
  {
    role: 'user',
    content: `è¯·è¯¦ç»†æ¢è®¨5GæŠ€æœ¯çš„å‘å±•ç°çŠ¶ã€æŠ€æœ¯ç‰¹ç‚¹ä»¥åŠå¯¹æœªæ¥ç¤¾ä¼šçš„å½±å“ã€‚

5Gï¼ˆç¬¬äº”ä»£ç§»åŠ¨é€šä¿¡æŠ€æœ¯ï¼‰ä½œä¸ºæ–°ä¸€ä»£ç§»åŠ¨é€šä¿¡æ ‡å‡†ï¼Œä¸ä»…åœ¨ä¼ è¾“é€Ÿåº¦ä¸Šå®ç°äº†å¤§å¹…æå‡ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨è¿æ¥å¯†åº¦ã€å»¶è¿Ÿæ§åˆ¶ã€å¯é æ€§ç­‰æ–¹é¢éƒ½æœ‰äº†è´¨çš„é£è·ƒï¼Œä¸ºç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ã€è‡ªåŠ¨é©¾é©¶ã€è™šæ‹Ÿç°å®ç­‰æ–°å…´æŠ€æœ¯çš„å‘å±•æä¾›äº†å¼ºæœ‰åŠ›çš„ç½‘ç»œæ”¯æ’‘ã€‚

ä»æŠ€æœ¯ç‰¹ç‚¹æ¥çœ‹ï¼Œ5Gé‡‡ç”¨äº†å¤šé¡¹åˆ›æ–°æŠ€æœ¯ã€‚é¦–å…ˆæ˜¯æ¯«ç±³æ³¢æŠ€æœ¯ï¼Œ5Gå¯ä»¥ä½¿ç”¨æ›´é«˜çš„é¢‘æ®µï¼ˆåŒ…æ‹¬æ¯«ç±³æ³¢é¢‘æ®µï¼‰ï¼Œè¿™å¤§å¤§å¢åŠ äº†å¯ç”¨é¢‘è°±èµ„æºï¼Œä¸ºé«˜é€Ÿæ•°æ®ä¼ è¾“æä¾›äº†åŸºç¡€ã€‚å…¶æ¬¡æ˜¯å¤§è§„æ¨¡MIMOï¼ˆå¤šè¾“å…¥å¤šè¾“å‡ºï¼‰æŠ€æœ¯ï¼Œé€šè¿‡åœ¨åŸºç«™éƒ¨ç½²å¤§é‡å¤©çº¿ï¼Œå¯ä»¥å®ç°ç©ºé—´å¤ç”¨å’Œæ³¢æŸèµ‹å½¢ï¼Œæé«˜é¢‘è°±åˆ©ç”¨ç‡å’Œä¿¡å·è´¨é‡ã€‚

ç½‘ç»œåˆ‡ç‰‡æŠ€æœ¯æ˜¯5Gçš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸åœ¨åŒä¸€ç‰©ç†ç½‘ç»œä¸Šåˆ›å»ºå¤šä¸ªè™šæ‹Ÿç½‘ç»œï¼Œæ¯ä¸ªåˆ‡ç‰‡å¯ä»¥é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯è¿›è¡Œä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸ºè‡ªåŠ¨é©¾é©¶æ±½è½¦æä¾›è¶…ä½å»¶è¿Ÿçš„ç½‘ç»œåˆ‡ç‰‡ï¼Œä¸ºç‰©è”ç½‘è®¾å¤‡æä¾›å¤§è¿æ¥çš„ç½‘ç»œåˆ‡ç‰‡ã€‚

è¾¹ç¼˜è®¡ç®—ä¸5Gçš„ç»“åˆä¹Ÿæ˜¯é‡è¦çš„å‘å±•æ–¹å‘ã€‚é€šè¿‡å°†è®¡ç®—èƒ½åŠ›ä¸‹æ²‰åˆ°ç½‘ç»œè¾¹ç¼˜ï¼Œå¯ä»¥æ˜¾è‘—é™ä½æ•°æ®ä¼ è¾“å»¶è¿Ÿï¼Œæé«˜å“åº”é€Ÿåº¦ï¼Œè¿™å¯¹äºè‡ªåŠ¨é©¾é©¶ã€å·¥ä¸šè‡ªåŠ¨åŒ–ç­‰å¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨åœºæ™¯å…·æœ‰é‡è¦æ„ä¹‰ã€‚

5Gçš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ã€‚åœ¨å·¥ä¸šé¢†åŸŸï¼Œ5Gæ”¯æŒå·¥ä¸š4.0çš„å®ç°ï¼Œé€šè¿‡é«˜é€Ÿã€ä½å»¶è¿Ÿçš„ç½‘ç»œè¿æ¥ï¼Œå®ç°æ™ºèƒ½åˆ¶é€ ã€è¿œç¨‹ç›‘æ§ã€é¢„æµ‹æ€§ç»´æŠ¤ç­‰åº”ç”¨ã€‚åœ¨åŒ»ç–—é¢†åŸŸï¼Œ5Gæ”¯æŒè¿œç¨‹æ‰‹æœ¯ã€è¿œç¨‹è¯Šæ–­ã€åŒ»ç–—æ•°æ®ä¼ è¾“ç­‰åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ç–«æƒ…æœŸé—´ï¼Œ5Gæ”¯æŒçš„è¿œç¨‹åŒ»ç–—å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚

åœ¨äº¤é€šé¢†åŸŸï¼Œ5Gä¸ºè‡ªåŠ¨é©¾é©¶æä¾›äº†å¿…è¦çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œè½¦è¾†å¯ä»¥é€šè¿‡5Gç½‘ç»œä¸é“è·¯åŸºç¡€è®¾æ–½ã€å…¶ä»–è½¦è¾†è¿›è¡Œå®æ—¶é€šä¿¡ï¼Œæé«˜è¡Œé©¶å®‰å…¨æ€§ã€‚åœ¨å¨±ä¹é¢†åŸŸï¼Œ5Gæ”¯æŒ4K/8Kè§†é¢‘ä¼ è¾“ã€äº‘æ¸¸æˆã€è™šæ‹Ÿç°å®ç­‰åº”ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ æ²‰æµ¸å¼çš„ä½“éªŒã€‚

ç„¶è€Œï¼Œ5GæŠ€æœ¯çš„å‘å±•ä¹Ÿé¢ä¸´ç€ä¸€äº›æŒ‘æˆ˜ã€‚é¦–å…ˆæ˜¯åŸºç¡€è®¾æ–½å»ºè®¾æˆæœ¬é«˜æ˜‚ï¼Œéœ€è¦éƒ¨ç½²å¤§é‡åŸºç«™å’Œå…‰çº¤ç½‘ç»œã€‚å…¶æ¬¡æ˜¯é¢‘è°±èµ„æºæœ‰é™ï¼Œéœ€è¦åˆç†åˆ†é…å’Œç®¡ç†ã€‚æ­¤å¤–ï¼Œ5Gç½‘ç»œçš„å®‰å…¨æ€§ã€éšç§ä¿æŠ¤ç­‰é—®é¢˜ä¹Ÿéœ€è¦é‡ç‚¹å…³æ³¨ã€‚

ä»ç¤¾ä¼šå½±å“è§’åº¦æ¥çœ‹ï¼Œ5GæŠ€æœ¯å°†æ¨åŠ¨æ•°å­—åŒ–è½¬å‹ï¼Œæ”¹å˜äººä»¬çš„ç”Ÿæ´»æ–¹å¼å’Œå·¥ä½œæ–¹å¼ã€‚å®ƒå°†åŠ é€Ÿç‰©è”ç½‘çš„å‘å±•ï¼Œå®ç°ä¸‡ç‰©äº’è”çš„æ„¿æ™¯ã€‚åŒæ—¶ï¼Œ5Gä¹Ÿå°†æ¨åŠ¨æ–°å…´äº§ä¸šçš„å…´èµ·ï¼Œåˆ›é€ æ–°çš„å°±ä¸šæœºä¼šå’Œå•†ä¸šæ¨¡å¼ã€‚

è¯·åˆ†æ5GæŠ€æœ¯å‘å±•é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•æ¨åŠ¨5GæŠ€æœ¯åœ¨æ›´å¤šé¢†åŸŸå®ç°å•†ä¸šåŒ–åº”ç”¨ã€‚`,
  },
]

class PressureTester {
  constructor(config) {
    this.config = { ...DEFAULT_CONFIG, ...config }
    this.results = []
    this.startTime = null
    this.endTime = null
    this.stats = {
      total: 0,
      success: 0,
      failed: 0,
      timeout: 0,
      errors: 0,
      responseTimes: [],
    }

    // ç”Ÿæˆå½“å‰æµ‹è¯•çš„å”¯ä¸€æ—¶é—´æˆ³
    this.testTimestamp = new Date().toISOString().replace(/[:.]/g, '-')
    this.testId = `test-${this.testTimestamp}`

    // åˆ›å»ºaxioså®ä¾‹
    this.client = axios.create({
      baseURL: CONFIG.baseURL,
      timeout: this.config.timeout,
      headers: {
        Authorization: `Bearer ${CONFIG.apiKey}`,
        'Content-Type': 'application/json',
      },
    })
  }

  // ç”Ÿæˆéšæœºæµ‹è¯•æ¶ˆæ¯
  getRandomMessage() {
    return TEST_MESSAGES[Math.floor(Math.random() * TEST_MESSAGES.length)]
  }

  // å‘é€å•ä¸ªè¯·æ±‚
  async sendRequest(requestId) {
    const startTime = Date.now()
    const message = this.getRandomMessage()

    // æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼ˆæ¯100ä¸ªè¯·æ±‚è®°å½•ä¸€æ¬¡ï¼‰
    if (requestId % 100 === 0) {
      console.log(
        chalk.yellow(
          `ğŸ“¤ å‘é€è¯·æ±‚ ${requestId}, å½“å‰ç»Ÿè®¡: æˆåŠŸ=${this.stats.success}, å¤±è´¥=${this.stats.failed}`
        )
      )
    }

    try {
      const response = await this.client.post(CONFIG.endpoint, {
        model: CONFIG.model,
        messages: [message],
        max_tokens: 2000, // å¢åŠ è¾“å‡ºtokenæ•°é‡ä»¥åŒ¹é…é•¿è¾“å…¥
        temperature: 0.7,
      })

      const endTime = Date.now()
      const responseTime = endTime - startTime

      // çº¿ç¨‹å®‰å…¨çš„ç»Ÿè®¡æ›´æ–°
      this.updateStats(true, responseTime)

      return {
        requestId,
        success: true,
        responseTime,
        status: response.status,
        data: response.data,
        error: null,
      }
    } catch (error) {
      const endTime = Date.now()
      const responseTime = endTime - startTime

      // çº¿ç¨‹å®‰å…¨çš„ç»Ÿè®¡æ›´æ–°
      this.updateStats(false, responseTime, error)

      return {
        requestId,
        success: false,
        responseTime,
        status: error.response?.status || 0,
        data: null,
        error: error.message,
      }
    }
  }

  // çº¿ç¨‹å®‰å…¨çš„ç»Ÿè®¡æ›´æ–°æ–¹æ³•
  updateStats(success, responseTime, error = null) {
    this.stats.total++
    this.stats.responseTimes.push(responseTime)

    if (success) {
      this.stats.success++
    } else {
      this.stats.failed++
      if (error && error.code === 'ECONNABORTED') {
        this.stats.timeout++
      } else {
        this.stats.errors++
      }
    }
  }

  // é€Ÿç‡é™åˆ¶è¯·æ±‚æ§åˆ¶ - æ¯ç§’å‘é€å›ºå®šæ•°é‡çš„è¯·æ±‚
  async runRateLimitedRequests(rate, totalRequests) {
    // åˆ›å»ºè¿›åº¦æ¡
    const progressBar = new cliProgress.SingleBar({
      format:
        chalk.cyan('é€Ÿç‡æµ‹è¯•') +
        ' |{bar}| {percentage}% | {value}/{total} è¯·æ±‚ | {duration_formatted} | {status}',
      barCompleteChar: '\u2588',
      barIncompleteChar: '\u2591',
      hideCursor: true,
    })

    progressBar.start(totalRequests, 0, {
      duration_formatted: '00:00',
      status: 'å‡†å¤‡ä¸­...',
    })

    const startTime = Date.now()
    let completedRequests = 0
    const requestInterval = 1000 / rate // æ¯ä¸ªè¯·æ±‚ä¹‹é—´çš„é—´éš”ï¼ˆæ¯«ç§’ï¼‰

    // å‘é€è¯·æ±‚çš„å‡½æ•°
    const sendRequestWithRateLimit = async (requestId) => {
      // è®¡ç®—è¿™ä¸ªè¯·æ±‚åº”è¯¥ä½•æ—¶å‘é€
      const scheduledTime = startTime + (requestId - 1) * requestInterval
      const now = Date.now()

      // å¦‚æœè¿˜æ²¡åˆ°å‘é€æ—¶é—´ï¼Œç­‰å¾…
      if (scheduledTime > now) {
        await new Promise((resolve) => setTimeout(resolve, scheduledTime - now))
      }

      const result = await this.sendRequest(requestId)
      this.results.push(result)
      completedRequests++

      // æ›´æ–°è¿›åº¦æ¡
      const elapsed = Math.floor((Date.now() - startTime) / 1000)
      const duration_formatted = `${Math.floor(elapsed / 60)
        .toString()
        .padStart(2, '0')}:${(elapsed % 60).toString().padStart(2, '0')}`
      const successRate =
        this.stats.total > 0
          ? ((this.stats.success / this.stats.total) * 100).toFixed(1)
          : 0

      progressBar.update(completedRequests, {
        duration_formatted,
        status: `æˆåŠŸç‡: ${successRate}% | æˆåŠŸ: ${this.stats.success} | å¤±è´¥: ${this.stats.failed} | é€Ÿç‡: ${rate}/s`,
      })
    }

    // å¹¶å‘å‘é€è¯·æ±‚ï¼ˆä½†é€šè¿‡æ—¶é—´æ§åˆ¶é€Ÿç‡ï¼‰
    const promises = []
    for (let i = 1; i <= totalRequests; i++) {
      promises.push(sendRequestWithRateLimit(i))
    }

    await Promise.all(promises)
    progressBar.stop()
  }

  // å¹¶å‘è¯·æ±‚æ§åˆ¶ - ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶çœŸæ­£çš„å¹¶å‘
  async runConcurrentRequests(concurrent, totalRequests) {
    // åˆ›å»ºè¿›åº¦æ¡
    const progressBar = new cliProgress.SingleBar({
      format:
        chalk.cyan('è¿›åº¦') +
        ' |{bar}| {percentage}% | {value}/{total} è¯·æ±‚ | {duration_formatted} | {status}',
      barCompleteChar: '\u2588',
      barIncompleteChar: '\u2591',
      hideCursor: true,
    })

    progressBar.start(totalRequests, 0, {
      duration_formatted: '00:00',
      status: 'å‡†å¤‡ä¸­...',
    })

    const startTime = Date.now()
    let completedRequests = 0

    // åˆ›å»ºè¯·æ±‚é˜Ÿåˆ—
    const requestQueue = []
    for (let i = 1; i <= totalRequests; i++) {
      requestQueue.push(i)
    }

    // ä¿¡å·é‡æ§åˆ¶å¹¶å‘
    const semaphore = new Semaphore(concurrent)

    // å¤„ç†æ‰€æœ‰è¯·æ±‚
    const promises = requestQueue.map(async (requestId) => {
      await semaphore.acquire()
      try {
        // è¯·æ±‚é—´éš” - åœ¨ä¿¡å·é‡å†…éƒ¨ï¼Œç¡®ä¿çœŸæ­£çš„å¹¶å‘æ§åˆ¶
        if (this.config.interval > 0) {
          await new Promise((resolve) =>
            setTimeout(resolve, this.config.interval)
          )
        }

        const result = await this.sendRequest(requestId)
        this.results.push(result)

        completedRequests++

        // æ›´æ–°è¿›åº¦æ¡
        const elapsed = Math.floor((Date.now() - startTime) / 1000)
        const duration_formatted = `${Math.floor(elapsed / 60)
          .toString()
          .padStart(2, '0')}:${(elapsed % 60).toString().padStart(2, '0')}`
        const successRate =
          this.stats.total > 0
            ? ((this.stats.success / this.stats.total) * 100).toFixed(1)
            : 0

        progressBar.update(completedRequests, {
          duration_formatted,
          status: `æˆåŠŸç‡: ${successRate}% | æˆåŠŸ: ${this.stats.success} | å¤±è´¥: ${this.stats.failed}`,
        })
      } finally {
        semaphore.release()
      }
    })

    await Promise.all(promises)
    progressBar.stop()
  }

  // æ—¶é—´é™åˆ¶æµ‹è¯• - ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶çœŸæ­£çš„å¹¶å‘
  async runDurationTest(concurrent, duration) {
    // åˆ›å»ºè¿›åº¦æ¡
    const progressBar = new cliProgress.SingleBar({
      format:
        chalk.cyan('æ—¶é—´æµ‹è¯•') +
        ' |{bar}| {percentage}% | {value}/{total} ç§’ | {requests} è¯·æ±‚ | {status}',
      barCompleteChar: '\u2588',
      barIncompleteChar: '\u2591',
      hideCursor: true,
    })

    progressBar.start(duration, 0, {
      requests: 0,
      status: 'å‡†å¤‡ä¸­...',
    })

    const startTime = Date.now()
    const endTime = Date.now() + duration * 1000
    let requestId = 0

    // ä¿¡å·é‡æ§åˆ¶å¹¶å‘
    const semaphore = new Semaphore(concurrent)

    // æŒç»­å‘é€è¯·æ±‚ç›´åˆ°æ—¶é—´ç»“æŸ
    const sendRequests = async () => {
      while (Date.now() < endTime) {
        requestId++
        await semaphore.acquire()

        // å¼‚æ­¥å¤„ç†è¯·æ±‚ï¼Œä¸ç­‰å¾…å®Œæˆ
        this.sendRequest(requestId)
          .then((result) => {
            this.results.push(result)
            semaphore.release()
          })
          .catch((error) => {
            // å³ä½¿è¯·æ±‚å¤±è´¥ï¼Œä¹Ÿéœ€è¦é‡Šæ”¾ä¿¡å·é‡
            // æ³¨æ„ï¼šè¿™é‡Œä¸åº”è¯¥è°ƒç”¨updateStatsï¼Œå› ä¸ºsendRequestå†…éƒ¨å·²ç»è°ƒç”¨äº†
            semaphore.release()
          })

        // è¯·æ±‚é—´éš”
        if (this.config.interval > 0) {
          await new Promise((resolve) =>
            setTimeout(resolve, this.config.interval)
          )
        }
      }
    }

    // æ›´æ–°è¿›åº¦æ¡
    const updateProgress = () => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000)
      const remaining = Math.max(0, duration - elapsed)
      const successRate =
        this.stats.total > 0
          ? ((this.stats.success / this.stats.total) * 100).toFixed(1)
          : 0

      progressBar.update(elapsed, {
        requests: this.stats.total,
        status: `æˆåŠŸç‡: ${successRate}% | æˆåŠŸ: ${this.stats.success} | å¤±è´¥: ${this.stats.failed}`,
      })

      if (elapsed < duration) {
        setTimeout(updateProgress, 1000)
      }
    }

    // å¯åŠ¨è¯·æ±‚å‘é€å’Œè¿›åº¦æ›´æ–°
    const requestsPromise = sendRequests()
    updateProgress()

    await requestsPromise

    // ç­‰å¾…æ‰€æœ‰æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚å®Œæˆ
    while (semaphore.current > 0) {
      await new Promise((resolve) => setTimeout(resolve, 100))
    }

    progressBar.stop()
  }

  // è®¡ç®—ç»Ÿè®¡æ•°æ®
  calculateStats() {
    const responseTimes = this.stats.responseTimes
    const sorted = responseTimes.sort((a, b) => a - b)

    return {
      total: this.stats.total,
      success: this.stats.success,
      failed: this.stats.failed,
      timeout: this.stats.timeout,
      errors: this.stats.errors,
      successRate:
        this.stats.total > 0
          ? ((this.stats.success / this.stats.total) * 100).toFixed(2)
          : 0,
      avgResponseTime:
        responseTimes.length > 0
          ? (
              responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length
            ).toFixed(2)
          : 0,
      minResponseTime: sorted.length > 0 ? sorted[0] : 0,
      maxResponseTime: sorted.length > 0 ? sorted[sorted.length - 1] : 0,
      p50: sorted.length > 0 ? sorted[Math.floor(sorted.length * 0.5)] : 0,
      p90: sorted.length > 0 ? sorted[Math.floor(sorted.length * 0.9)] : 0,
      p95: sorted.length > 0 ? sorted[Math.floor(sorted.length * 0.95)] : 0,
      p99: sorted.length > 0 ? sorted[Math.floor(sorted.length * 0.99)] : 0,
      qps: this.stats.total / ((this.endTime - this.startTime) / 1000),
    }
  }

  // ä¿å­˜ç»“æœ
  async saveResults(stats) {
    if (!this.config.saveResults) return

    // åˆ›å»ºè¾“å‡ºç›®å½•
    if (!fs.existsSync(this.config.outputDir)) {
      fs.mkdirSync(this.config.outputDir, { recursive: true })
    }

    // ä½¿ç”¨å½“å‰æµ‹è¯•çš„æ—¶é—´æˆ³
    const timestamp = this.testTimestamp

    // ä¿å­˜å®Œæ•´ç»“æœ
    const filename = `pressure-test-${timestamp}.json`
    const filepath = path.join(this.config.outputDir, filename)

    const report = {
      testId: this.testId,
      config: this.config,
      stats,
      results: this.results,
      startTime: this.startTime ? new Date(this.startTime).toISOString() : null,
      endTime: this.endTime ? new Date(this.endTime).toISOString() : null,
      duration:
        this.endTime && this.startTime ? this.endTime - this.startTime : 0,
      timestamp: new Date().toISOString(),
    }

    fs.writeFileSync(filepath, JSON.stringify(report, null, 2))
    console.log(chalk.green(`\nğŸ“Š æµ‹è¯•ç»“æœå·²ä¿å­˜åˆ°: ${filepath}`))
    console.log(chalk.gray(`   æµ‹è¯•ID: ${this.testId}`))

    // è°ƒè¯•ä¿¡æ¯ï¼šæ˜¾ç¤ºç»Ÿè®¡å¯¹æ¯”
    console.log(chalk.yellow(`\nğŸ” ç»Ÿè®¡è°ƒè¯•ä¿¡æ¯:`))
    console.log(chalk.gray(`   stats.total: ${stats.total}`))
    console.log(chalk.gray(`   stats.success: ${stats.success}`))
    console.log(chalk.gray(`   stats.failed: ${stats.failed}`))
    console.log(chalk.gray(`   results.length: ${this.results.length}`))
    console.log(
      chalk.gray(
        `   resultsæˆåŠŸæ•°: ${this.results.filter((r) => r.success).length}`
      )
    )
    console.log(
      chalk.gray(
        `   resultså¤±è´¥æ•°: ${this.results.filter((r) => !r.success).length}`
      )
    )

    // ä¿å­˜æ‰€æœ‰è¯·æ±‚çš„è¯¦ç»†æ—¥å¿—ï¼ˆæˆåŠŸå’Œå¤±è´¥ï¼‰
    const allRequestsFilename = `all-requests-${timestamp}.json`
    const allRequestsFilepath = path.join(
      this.config.outputDir,
      allRequestsFilename
    )

    const allRequestsReport = {
      testId: this.testId,
      summary: {
        totalRequests: this.results.length,
        successRequests: this.results.filter((r) => r.success).length,
        failedRequests: this.results.filter((r) => !r.success).length,
        successRate:
          this.results.length > 0
            ? (
                (this.results.filter((r) => r.success).length /
                  this.results.length) *
                100
              ).toFixed(2) + '%'
            : '0%',
        timestamp: new Date().toISOString(),
      },
      allRequests: this.results.map((result) => ({
        requestId: result.requestId,
        success: result.success,
        responseTime: result.responseTime,
        status: result.status,
        error: result.error,
        timestamp: new Date().toISOString(),
      })),
      successRequests: this.results
        .filter((r) => r.success)
        .map((result) => ({
          requestId: result.requestId,
          responseTime: result.responseTime,
          status: result.status,
          timestamp: new Date().toISOString(),
        })),
      failedRequests: this.results
        .filter((r) => !r.success)
        .map((result) => ({
          requestId: result.requestId,
          responseTime: result.responseTime,
          status: result.status,
          error: result.error,
          timestamp: new Date().toISOString(),
        })),
    }

    fs.writeFileSync(
      allRequestsFilepath,
      JSON.stringify(allRequestsReport, null, 2)
    )
    console.log(chalk.blue(`\nğŸ“ æ‰€æœ‰è¯·æ±‚æ—¥å¿—å·²ä¿å­˜åˆ°: ${allRequestsFilepath}`))
    console.log(
      chalk.gray(`   æˆåŠŸè¯·æ±‚: ${allRequestsReport.summary.successRequests}`)
    )
    console.log(
      chalk.gray(`   å¤±è´¥è¯·æ±‚: ${allRequestsReport.summary.failedRequests}`)
    )

    // ä¿å­˜å¤±è´¥æ—¥å¿—
    const failedResults = this.results.filter((result) => !result.success)
    if (failedResults.length > 0) {
      const failedFilename = `failed-requests-${timestamp}.json`
      const failedFilepath = path.join(this.config.outputDir, failedFilename)

      const failedReport = {
        testId: this.testId,
        summary: {
          totalFailed: failedResults.length,
          totalRequests: this.results.length,
          failureRate:
            ((failedResults.length / this.results.length) * 100).toFixed(2) +
            '%',
          timestamp: new Date().toISOString(),
        },
        failedRequests: failedResults.map((result) => ({
          requestId: result.requestId,
          responseTime: result.responseTime,
          status: result.status,
          error: result.error,
          timestamp: new Date().toISOString(),
        })),
        errorAnalysis: this.analyzeErrors(failedResults),
      }

      fs.writeFileSync(failedFilepath, JSON.stringify(failedReport, null, 2))
      console.log(chalk.red(`\nâŒ å¤±è´¥è¯·æ±‚æ—¥å¿—å·²ä¿å­˜åˆ°: ${failedFilepath}`))
      console.log(
        chalk.red(
          `   å¤±è´¥è¯·æ±‚æ•°é‡: ${failedResults.length}/${this.results.length}`
        )
      )
    }

    // ä¿å­˜æˆåŠŸè¯·æ±‚æ—¥å¿—
    const successResults = this.results.filter((result) => result.success)
    if (successResults.length > 0) {
      const successFilename = `success-requests-${timestamp}.json`
      const successFilepath = path.join(this.config.outputDir, successFilename)

      const successReport = {
        testId: this.testId,
        summary: {
          totalSuccess: successResults.length,
          totalRequests: this.results.length,
          successRate:
            ((successResults.length / this.results.length) * 100).toFixed(2) +
            '%',
          avgResponseTime:
            successResults.reduce((sum, r) => sum + r.responseTime, 0) /
            successResults.length,
          minResponseTime: Math.min(
            ...successResults.map((r) => r.responseTime)
          ),
          maxResponseTime: Math.max(
            ...successResults.map((r) => r.responseTime)
          ),
          timestamp: new Date().toISOString(),
        },
        successRequests: successResults.map((result) => ({
          requestId: result.requestId,
          responseTime: result.responseTime,
          status: result.status,
          timestamp: new Date().toISOString(),
        })),
      }

      fs.writeFileSync(successFilepath, JSON.stringify(successReport, null, 2))
      console.log(chalk.green(`\nâœ… æˆåŠŸè¯·æ±‚æ—¥å¿—å·²ä¿å­˜åˆ°: ${successFilepath}`))
      console.log(
        chalk.green(
          `   æˆåŠŸè¯·æ±‚æ•°é‡: ${successResults.length}/${this.results.length}`
        )
      )
    }

    // ä¿å­˜æµ‹è¯•æ‘˜è¦
    const summaryFilename = `test-summary-${timestamp}.json`
    const summaryFilepath = path.join(this.config.outputDir, summaryFilename)

    const summary = {
      testId: this.testId,
      timestamp: new Date().toISOString(),
      config: {
        concurrent: this.config.concurrent,
        requests: this.config.requests,
        duration: this.config.duration,
        interval: this.config.interval,
        timeout: this.config.timeout,
      },
      results: {
        total: stats.total,
        success: stats.success,
        failed: stats.failed,
        successRate: stats.successRate + '%',
        avgResponseTime: stats.avgResponseTime + 'ms',
        qps: stats.qps.toFixed(2),
      },
      files: {
        fullReport: filename,
        allRequests: allRequestsFilename,
        successLog:
          successResults.length > 0
            ? `success-requests-${timestamp}.json`
            : null,
        failedLog:
          failedResults.length > 0 ? `failed-requests-${timestamp}.json` : null,
        summary: summaryFilename,
      },
    }

    fs.writeFileSync(summaryFilepath, JSON.stringify(summary, null, 2))
    console.log(chalk.blue(`\nğŸ“‹ æµ‹è¯•æ‘˜è¦å·²ä¿å­˜åˆ°: ${summaryFilepath}`))
  }

  // åˆ†æé”™è¯¯ç±»å‹
  analyzeErrors(failedResults) {
    const errorTypes = {}
    const statusCodes = {}

    failedResults.forEach((result) => {
      // ç»Ÿè®¡é”™è¯¯ç±»å‹
      const errorType = result.error || 'Unknown Error'
      errorTypes[errorType] = (errorTypes[errorType] || 0) + 1

      // ç»Ÿè®¡çŠ¶æ€ç 
      const statusCode = result.status || 0
      statusCodes[statusCode] = (statusCodes[statusCode] || 0) + 1
    })

    return {
      errorTypes,
      statusCodes,
      mostCommonError: Object.entries(errorTypes).sort(
        (a, b) => b[1] - a[1]
      )[0],
      mostCommonStatus: Object.entries(statusCodes).sort(
        (a, b) => b[1] - a[1]
      )[0],
    }
  }

  // æ‰“å°æµ‹è¯•æŠ¥å‘Š
  printReport(stats) {
    console.log(chalk.cyan('\n' + '='.repeat(60)))
    console.log(chalk.cyan('ğŸ“Š å‹æµ‹ç»“æœæŠ¥å‘Š'))
    console.log(chalk.cyan('='.repeat(60)))

    console.log(chalk.yellow('\nğŸ“ˆ åŸºæœ¬ç»Ÿè®¡:'))
    console.log(`  æ€»è¯·æ±‚æ•°: ${chalk.green(stats.total)}`)
    console.log(`  æˆåŠŸè¯·æ±‚: ${chalk.green(stats.success)}`)
    console.log(`  å¤±è´¥è¯·æ±‚: ${chalk.red(stats.failed)}`)
    console.log(`  è¶…æ—¶è¯·æ±‚: ${chalk.red(stats.timeout)}`)
    console.log(`  é”™è¯¯è¯·æ±‚: ${chalk.red(stats.errors)}`)
    console.log(`  æˆåŠŸç‡: ${chalk.green(stats.successRate)}%`)

    console.log(chalk.yellow('\nâ±ï¸  å“åº”æ—¶é—´ç»Ÿè®¡ (æ¯«ç§’):'))
    console.log(`  å¹³å‡å“åº”æ—¶é—´: ${chalk.green(stats.avgResponseTime)}ms`)
    console.log(`  æœ€å°å“åº”æ—¶é—´: ${chalk.green(stats.minResponseTime)}ms`)
    console.log(`  æœ€å¤§å“åº”æ—¶é—´: ${chalk.red(stats.maxResponseTime)}ms`)
    console.log(`  P50 (ä¸­ä½æ•°): ${chalk.green(stats.p50)}ms`)
    console.log(`  P90: ${chalk.green(stats.p90)}ms`)
    console.log(`  P95: ${chalk.green(stats.p95)}ms`)
    console.log(`  P99: ${chalk.green(stats.p99)}ms`)

    console.log(chalk.yellow('\nğŸš€ æ€§èƒ½æŒ‡æ ‡:'))
    console.log(`  QPS (æ¯ç§’è¯·æ±‚æ•°): ${chalk.green(stats.qps.toFixed(2))}`)

    console.log(chalk.yellow('\nğŸ”§ æµ‹è¯•é…ç½®:'))
    console.log(`  å¹¶å‘æ•°: ${chalk.green(this.config.concurrent)}`)
    console.log(`  è¯·æ±‚é—´éš”: ${chalk.green(this.config.interval)}ms`)
    console.log(`  è¶…æ—¶æ—¶é—´: ${chalk.green(this.config.timeout)}ms`)
    console.log(`  ç›®æ ‡åŸŸå: ${chalk.green(CONFIG.baseURL)}`)
    console.log(`  æ¨¡å‹åç§°: ${chalk.green(CONFIG.model)}`)

    console.log(chalk.cyan('\n' + '='.repeat(60)))
  }

  // è¿è¡Œå‹æµ‹
  async run() {
    console.log(chalk.blue('ğŸš€ å¼€å§‹æ¥å£å‹æµ‹...'))
    console.log(chalk.gray(`ç›®æ ‡åŸŸå: ${CONFIG.baseURL}`))
    console.log(chalk.gray(`æ¨¡å‹åç§°: ${CONFIG.model}`))
    console.log(chalk.gray(`å¹¶å‘æ•°: ${this.config.concurrent}`))
    console.log(chalk.gray(`è¶…æ—¶æ—¶é—´: ${this.config.timeout}ms`))

    if (this.config.rate > 0) {
      console.log(chalk.gray(`é€Ÿç‡é™åˆ¶: ${this.config.rate} è¯·æ±‚/ç§’`))
    } else {
      console.log(chalk.gray(`è¯·æ±‚é—´éš”: ${this.config.interval}ms`))
    }

    if (this.config.duration > 0) {
      console.log(chalk.gray(`æŒç»­æ—¶é—´: ${this.config.duration}ç§’`))
    } else {
      console.log(chalk.gray(`æ€»è¯·æ±‚æ•°: ${this.config.requests}`))
    }

    console.log('')

    this.startTime = Date.now()

    try {
      if (this.config.duration > 0) {
        await this.runDurationTest(this.config.concurrent, this.config.duration)
      } else if (this.config.rate > 0) {
        // ä½¿ç”¨é€Ÿç‡é™åˆ¶æ¨¡å¼
        await this.runRateLimitedRequests(
          this.config.rate,
          this.config.requests
        )
      } else {
        // ä½¿ç”¨å¹¶å‘æ§åˆ¶æ¨¡å¼
        await this.runConcurrentRequests(
          this.config.concurrent,
          this.config.requests
        )
      }
    } catch (error) {
      console.error(chalk.red('å‹æµ‹è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:'), error.message)
    }

    this.endTime = Date.now()
    const stats = this.calculateStats()

    this.printReport(stats)
    await this.saveResults(stats)

    return stats
  }
}

// å‘½ä»¤è¡Œå‚æ•°è§£æ
program
  .name('pressure-test')
  .description('OpenAIæ ¼å¼æ¥å£å‹æµ‹å·¥å…·')
  .version('1.0.0')

program
  .option('-c, --concurrent <number>', 'å¹¶å‘æ•°', '10')
  .option('-d, --duration <number>', 'æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰', '0')
  .option('-r, --requests <number>', 'æ€»è¯·æ±‚æ•°', '100')
  .option('-t, --timeout <number>', 'è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰', '30000')
  .option('-i, --interval <number>', 'è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰', '1000')
  .option('--no-save', 'ä¸ä¿å­˜ç»“æœ')
  .option('-o, --output <dir>', 'ç»“æœè¾“å‡ºç›®å½•', './results')
  .action(async (options) => {
    const config = {
      concurrent: parseInt(options.concurrent),
      duration: parseInt(options.duration),
      requests: parseInt(options.requests),
      timeout: parseInt(options.timeout),
      interval: parseInt(options.interval),
      saveResults: options.save,
      outputDir: options.output,
    }

    const tester = new PressureTester(config)
    await tester.run()
  })

// å¦‚æœç›´æ¥è¿è¡Œæ­¤è„šæœ¬
if (require.main === module) {
  program.parse()
}

module.exports = PressureTester
